FROM alpine:edge

RUN apk add --no-cache bind-tools \
		       git \
		       python3 \
                       py3-dnspython \
	               bash \
                       iperf3 \
		       openssh

ADD ./client.sh /

ADD ./config /root/.ssh/config
ADD --chown=0 ./id_rsa.NEED /
RUN mkdir /opt/; \
    cd /opt/; \
    git clone --branch tcal_c --depth 1 git@NEED:joaoneves792/NEED.git

ENTRYPOINT ["/bin/bash", "/client.sh"]
