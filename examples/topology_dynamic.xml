<?xml version="1.0" encoding="UTF-8" ?>
<experiment boot="need:2.0">
	<services>
		<service name="dashboard" image="warpenguin.no-ip.org/dashboard:1.0" supervisor="true" port="8088"/>
		<service name="logger"  image="warpenguin.no-ip.org/logger:1.0" supervisor="true" />
		<service name="client1" image="warpenguin.no-ip.org/alpineclient:1.0" command="['server', '0', '0']"/>
		<service name="server" image="warpenguin.no-ip.org/alpineserver:1.0" share="false"/>
	</services>
	<bridges>
		<bridge name="s1"/>
		<bridge name="s2"/>
		<bridge name="s3"/>
		<bridge name="s4"/>
		<bridge name="s5"/>
	</bridges>
		<links>
		<link origin="client1" dest="s1" latency="0.01" upload="50Mbps" download="50Mbps" network="test_overlay"/>
		<link origin="s1" dest="s3" latency="0.02" upload="50Mbps" download="50Mbps" network="test_overlay"/>
		<link origin="s1" dest="s4" latency="0.64" upload="20Mbps" download="20Mbps" network="test_overlay"/>
		<link origin="s3" dest="s2" latency="0.04" upload="50Mbps" download="50Mbps" network="test_overlay"/>
		<link origin="s4" dest="s5" latency="0.16" upload="20Mbps" download="20Mbps" network="test_overlay"/>
		<link origin="s5" dest="s2" latency="0.32" upload="20Mbps" download="20Mbps" network="test_overlay"/>
		<link origin="s2" dest="server" latency="0.08" upload="50Mbps" download="50Mbps" network="test_overlay"/>
	</links>
	<dynamic>
		<schedule name="client1" time="0.0" action="join"/>
		<schedule name="server"  time="0.0" action="join"/>
		
		<schedule origin="s1" dest="s3" time="10.0" action="leave"/>																<!-- link leaving -->
		<schedule origin="client1" dest="server" time="20.0" action="join" latency="5" upload="100Mbps" download="100Mbps" network="test_overlay"/>	<!--create entirely new link ... -->
		<schedule origin="client1" dest="server" time="30.0" action="leave"/>														<!-- ... and remove it again -->
		<schedule origin="s1" dest="s3" time="40.0" action="join"/>																	<!-- first link comes back as well -->
		<schedule name="s3" time="50.0" action="leave"/>																			<!-- bridge leaving ... -->
		<schedule name="s3" time="60.0" action="join"/>																				<!-- ... and coming back -->
		
		<schedule name="client1" time="100.0" action="crash"/>
		<schedule name="server"  time="100.0" action="leave"/>
	</dynamic>
</experiment>
